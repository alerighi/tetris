pkgname='tetris-git'
pkgver=r84.33cf2b4
pkgrel=1
pkgdesc='Cli tetris game'
arch=('i686' 'x86_64' 'armv7h' 'aarch64')
url='https://github.com/alerighi/tetris'
license=('GPL3.0')
depends=('ncurses')
makedepends=('meson' 'ninja')
provides=('tetris-git')
conflicts=('tetris-git')
source=("git+https://github.com/alerighi/tetris.git")
sha384sums=('SKIP')

pkgver() {
    cd "$srcdir/tetris"
    echo "r$(git rev-list --count HEAD).$(git rev-parse --short HEAD)"
}

build() {
    cd "$srcdir/tetris"
    rm -rf build/
    meson build --buildtype=release --prefix="$pkgdir/usr/"
    cd build
    ninja
}

package() {
    cd "$srcdir/tetris/build/"
    ninja install
}

